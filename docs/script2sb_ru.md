# script2sb

Приложение `script2sb` предназначено для создания модулей на основе установочного скрипта.

## Использование

```
script2sb [ПАРАМЕТРЫ]... --script=FILE
```

## Параметры

- `-d`, `--directory=DIR` - скопировать содержимое `DIR` в корень модуля

- `-f`, `--file=FILE` - использовать `FILE` в качестве имени файла для модуля

- `-l`, `--level=LEVEL` - использовать `LEVEL` в качестве уровня фильтрации

- `-s`, `--script=FILE` - использовать `FILE` в качестве скрипта установки

- `--help` - отобразить справку и выйти

- `--version` - отобразить информацию о версии и выйти

## Создание модулей
  
1. Запустите скрипт с правами root, используя команду `sudo`.
2. Укажите установочный скрипт с помощью параметра `--script=FILE`, где `FILE` - это путь к установочному скрипту.
3. Опционально вы можете указать директорию с помощью параметра `--directory=DIR`, где `DIR` - это путь к директории. Содержимое этой директории будет скопировано в файловую систему overlay перед запуском установочного скрипта.
4. Опционально вы можете указать имя файла для сохранения изменений с помощью параметра `--file=FILE`, где `FILE` - это имя файла. Если этот параметр не указан, имя файла будет сгенерировано автоматически на основе имени установочного скрипта.
5. Опционально вы можете указать уровень фильтрации с помощью параметра `--level=LEVEL`, где `LEVEL` - это числовое значение. Этот параметр используется для фильтрации слоев файловой системы overlay.

Например, чтобы запустить установочный скрипт `/path/to/install.sh` и сохранить изменения в файле `mymodule.sb`, вы можете использовать следующую команду:

```
sudo script2sb --script=/path/to/install.sh --file=mymodule.sb
```

Если вы хотите указать директорию `/path/to/dir` для копирования содержимого перед запуском установочного скрипта, вы можете использовать следующую команду:

```
sudo script2sb --script=/path/to/install.sh --file=mymodule.sb --directory=/path/to/dir
```

Если вы хотите фильтровать слои файловой системы overlay по уровню 3, вы можете использовать следующую команду:

```
sudo script2sb --script=/path/to/install.sh --file=mymodule.sb --level=3
```

Если вы не указываете параметры `--directory`, `--file` и `--level`, то они не используются. Если вы не указываете параметр `--file`, то имя файла для сохранения изменений генерируется автоматически на основе имени установочного скрипта.

Уровень фильтрации используется для фильтрации слоев файловой системы overlay. Например, если вы указываете уровень фильтрации 3 с помощью параметра `--level=3`, то будут отфильтрованы все слои файловой системы overlay с номером больше 3, сборка модуля будет запущена на базе модулей с номерами 00-03. В MiniOS номер 03 имеет модуль 03-xorg, значит собранный модуль сможет работать как в системе, где модули с большими номерами слоёв отсутствуют, так и с наличием таких модулей, так как он будет включать в себя все пакеты, необходимые для работы на базе 3го уровня.

Установочный скрипт, указанный с помощью параметра `--script`, может быть любым исполняемым скриптом, который выполняет желаемые шаги установки. Скрипт будет запущен в среде chroot внутри файловой системы overlay, поэтому он должен быть написан с учетом этого.

## Пример скрипта 

Вот пример простого установочного скрипта, который устанавливает текстовый редактор `nano` с помощью пакетного менеджера `apt-get`:

```bash
#!/bin/bash

# Обновление списков пакетов
apt-get update

# Установка nano
apt-get install -y nano
```

Этот скрипт обновляет списки пакетов, а затем устанавливает пакет `nano` с помощью команды `apt-get`. Конечно, это всего лишь простой пример, и настоящий установочный скрипт может быть гораздо более сложным и выполнять широкий спектр задач.